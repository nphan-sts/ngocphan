<?xml version="1.0" encoding="utf-8"?><Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>CPD_Reason_null</fullName>
        <description>set CPD Reason to null</description>
        <field>CPD_Reason__c</field>
        <name>CPD_Reason_null</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_CPD_Expiry_Date</fullName>
        <field>CPD_Expire_Date__c</field>
        <formula>if (DATE(year($User.loan__Current_Branch_s_System_Date__c),month($User.loan__Current_Branch_s_System_Date__c),( loan__Due_Day__c)) &gt;= ($User.loan__Current_Branch_s_System_Date__c), ADDMONTHS(DATE(year($User.loan__Current_Branch_s_System_Date__c),month($User.loan__Current_Branch_s_System_Date__c),(loan__Due_Day__c)),12),ADDMONTHS(DATE(year($User.loan__Current_Branch_s_System_Date__c),month($User.loan__Current_Branch_s_System_Date__c),(loan__Due_Day__c)),13))</formula>
        <name>Update CPD Expiry Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Loan_Status_Update_To_Closed_OM</fullName>
        <description>Loan Status Update To Closed OM</description>
        <field>loan__Loan_Status__c</field>
        <literalValue>Closed - Obligations met</literalValue>
        <name>Loan Status Update To Closed OM</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Post_approval_Loan_Status_Update_01</fullName>
        <description>Post-approval Loan Status Update 01</description>
        <field>loan__Loan_Status__c</field>
        <literalValue>Active - Good Standing</literalValue>
        <name>Post-approval Loan Status Update 01</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Status_Change_approved</fullName>
        <field>loan__Loan_Status__c</field>
        <literalValue>Approved</literalValue>
        <name>Status Change approved</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Status_Change_canceled</fullName>
        <field>loan__Loan_Status__c</field>
        <literalValue>Canceled</literalValue>
        <name>Status Change canceled</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Status_Change_pending_app</fullName>
        <field>loan__Loan_Status__c</field>
        <literalValue>Pending Approval</literalValue>
        <name>Status Change pending app</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Update_Approval_Date</fullName>
        <field>loan__Approval_Date__c</field>
        <formula>loan__Branch__r.loan__Current_System_Date__c</formula>
        <name>Update Approval Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>loan__Update_Payment_Application_Mode</fullName>
        <field>loan__Payment_Application_Mode__c</field>
        <literalValue>Current Dues</literalValue>
        <name>Update Payment Application Mode</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>peer__Calculate_VAT_on_Origination</fullName>
        <field>peer__Origination_VAT_Amount__c</field>
        <formula>IF(OR(ISNEW()|| ISCHANGED(peer__Origination_Fee__c)), (IF(OR(ISNULL(peer__VAT_percent__c), NOT(peer__VAT__c)), 0, (peer__Origination_Fee__c * peer__VAT_percent__c)/(1 + peer__VAT_percent__c))),  peer__Origination_VAT_Amount__c)</formula>
        <name>Calculate VAT on Origination Fee</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>peer__Update_VAT_percent</fullName>
        <description>Copies VAT %age from custom settings.</description>
        <field>peer__VAT_percent__c</field>
        <formula>IF(ISNEW(), $Setup.loan__Fractionalization_Parameters__c.peer__Global_VAT_Percentage__c / 100,  peer__VAT_percent__c)</formula>
        <name>Update VAT %age</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Update CPD Expiry Date</fullName>
        <actions>
            <name>Update_CPD_Expiry_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>loan__Loan_Account__c.CPD_Reason__c</field>
            <operation>equals</operation>
            <value>Changed Payment Date,Past Due or Loan Mod,Other</value>
        </criteriaItems>
        <description>When CPD Reason get set, update CPD Expire to today plus 12 months</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Update CPD Reason</fullName>
        <actions>
            <name>CPD_Reason_null</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Reset CPD Reason to null when CPD Expire date is reached</description>
        <formula>CPD_Expire_Date__c  &lt;  $User.loan__Current_Branch_s_System_Date__c</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>loan__Copy Loan Product Fields</fullName>
        <actions>
            <name>loan__Update_Payment_Application_Mode</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>ISPICKVAL(loan__Loan_Product_Name__r.loan__Payment_Application_Mode__c, 'Current Dues')</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>loan__Start Interest Accrual On Loan</fullName>
        <active>false</active>
        <formula>loan__Number_of_Days_Overdue__c &lt; $Setup.loan__Org_Parameters__c.loan__Interest_Accrual_Thresold_days__c</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>peer__Update VAT Amount</fullName>
        <actions>
            <name>peer__Calculate_VAT_on_Origination</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>peer__Update_VAT_percent</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>true</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
