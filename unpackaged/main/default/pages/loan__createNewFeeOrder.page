<apex:page lightningStylesheets="true" standardController="loan__Fee_Order__c" extensions="loan.CreateNewFeeOrderController">
<apex:include pageName="clcommon__mintTheme"/>

    <apex:outputPanel id="feeOrderBlock">
        <apex:form id="feeOrderForm">  
            <apex:outputPanel id="newFeeOrderPanel" >                                  
                    <apex:pageblock mode="edit" id="topBlk">
                        <apex:inlineEditSupport />
                        <apex:pagemessages />
                            <apex:pageBlockButtons >
                                <apex:commandButton status="saving" value="Save" disabled="{!isSaveAllowed == false}" action="{!createFeeOrder}" reRender="feeOrderBlock" id="sBtn">
                                    <apex:actionStatus id="saving">
                                        <apex:facet name="start">
                                            <apex:image value="/img/loading32.gif" style="height:15px;" />
                                        </apex:facet>
                                    </apex:actionStatus>
                                </apex:commandButton>
                                <apex:commandButton status="savingAndAdding" value="Save & New" disabled="{!isSaveAllowed == false}" action="{!saveAndNew}" reRender="feeOrderBlock" id="snBtn">
                                    <apex:actionStatus id="savingAndAdding">
                                        <apex:facet name="start">
                                            <apex:image value="/img/loading32.gif" style="height:15px;" />
                                        </apex:facet>
                                    </apex:actionStatus>
                                </apex:commandButton>
                                <apex:commandButton status="canceling" action="{!cancel}" value="Cancel" reRender="feeOrderBlock" id="cBtn">
                                    <apex:actionStatus id="canceling">
                                        <apex:facet name="start">
                                            <apex:image value="/img/loading32.gif" style="height:15px;" />
                                        </apex:facet>
                                    </apex:actionStatus>
                                </apex:commandButton>
                            </apex:pageBlockButtons>
                            
                        
                        <apex:pageBlockSection columns="1" title="Information">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Fee</apex:outputLabel>
                                <apex:outputpanel >
                                    <apex:inputfield value="{!loan__Fee_Order__c.loan__Fee__c}">
                                        <apex:actionSupport action="{!feeChange}" event="onchange" reRender="topBlk" status="feeChange" />
                                    </apex:inputField>
                                    <apex:actionStatus id="feeChange">
                                        <apex:facet name="start" >
                                            <apex:image value="/img/loading32.gif" style="height:15px;"/>
                                        </apex:facet>
                                    </apex:actionStatus>
                                </apex:outputpanel>
                            </apex:pageBlockSectionItem>
                            <apex:outputField value="{!loan__Fee_Order__c.loan__Lending_Product__c}"/>
                            <apex:pageBlocksectionItem >
                                <apex:outputLabel >Sort Order</apex:outputLabel>
                                <apex:inputField value="{!loan__Fee_Order__c.loan__Order_Number__c}"/>
                                
                            </apex:pageBlocksectionItem>
                        </apex:pageBlockSection>
                        
            </apex:pageBlock>
        </apex:outputPanel>
        <apex:pageBlock mode="edit">
            <apex:pageBlockSection title="Fee Order" columns="1">
                <apex:pageBlockTable value="{!feeOrdering}" var="feeOrder"  headerClass="fixedHeader" styleClass="scrollableFixedHeader" rendered="{!orderingPresent}">
                    
                    <apex:column >
                        <apex:facet name="header">Sort Number</apex:facet>
                        <apex:outputField value="{!feeOrder.loan__Order_Number__c}"/>
                    </apex:column>                    
                    <apex:column >
                        <apex:facet name="header">Fee</apex:facet>
                        <apex:outputField id="fee" value="{!feeOrder.loan__Fee__c}"/>
                    </apex:column>
                    
                </apex:pageBlockTable>
                
            </apex:pageblockSection>
            </apex:pageBlock>
        </apex:form>
    </apex:outputPanel>
</apex:page>