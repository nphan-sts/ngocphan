<apex:page lightningStylesheets="true" controller="loan.JVSupervisionAction" tabStyle="Accounting__tab">
<apex:include pageName="clcommon__mintTheme"/>

	<apex:form >
		<apex:pageMessages />
		<apex:sectionHeader title="JV Transactions Approval Form" />

		<apex:pageblock id="searchTransactionId">
			<center>
				<h1 style="font-size: 12px;">JV Transaction Search</h1>
				<br />
				<br />
			</center>
			<apex:pageblockSection title="Search Transactions" columns="2"
				collapsible="true">

				<apex:inputField value="{!searchObj.loan__Start_Date__c}" required="true" />
				<apex:inputField value="{!searchObj.loan__End_Date__c}" required="true" />
				<apex:outputLabel >
				</apex:outputLabel>
				<apex:outputLabel >
				</apex:outputLabel>

			</apex:pageblockSection>


			<apex:commandButton value="Search" action="{!doSearch}"
				rerender="transactionList" status="searchStatus" />
			<br></br>
			<apex:actionStatus id="searchStatus" startText="Searching..." />
			<apex:actionStatus id="paginatorStatus"
				startText="Fetching Entries..." />

		</apex:pageblock>


		<apex:pageblock id="transactionList">
			<apex:pageBlockSection collapsible="false" title="JVTransactions" />
			<apex:pageblockTable value="{!txnRowList}" id="transactionTable"
				var="JA">
				<apex:column width="10%">
					<apex:facet name="header">Action</apex:facet>
					<apex:inputCheckbox value="{!JA.checked}" />
					<apex:commandLink value="Edit"
						action="{!URLFOR($Action.Transaction__c.Edit, JA.txn.ID)}"
						target="_blank" />
				</apex:column>
				<apex:column value="{!JA.txn.loan__Document_Number__c}" width="20%">
					<apex:facet name="header">Document Number</apex:facet>
				</apex:column>
				<apex:column value="{!JA.txn.loan__Transaction_Date__c}" width="20%">
					<apex:facet name="header">Transaction Date</apex:facet>
				</apex:column>

				<apex:pageBlockTable value="{!JA.txnEntries}" var="Entry">
					<apex:column value="{!Entry.loan__MF_Account__c}" width="20%">
						<apex:facet name="header">Account</apex:facet>
					</apex:column>
					<apex:column value="{!Entry.loan__Description__c}" width="20%">
						<apex:facet name="header">Description</apex:facet>
					</apex:column>
					<apex:column value="{!Entry.loan__Credit__c}" width="20%">
						<apex:facet name="header">Credit</apex:facet>
					</apex:column>
					<apex:column value="{!Entry.loan__Debit__c}" width="20%">
						<apex:facet name="header">Debit</apex:facet>
					</apex:column>
				</apex:pageBlockTable>
			</apex:pageblockTable>

			<apex:pageBlockButtons location="bottom">
				<apex:commandButton value="Approve and Post JV Transactions"
					action="{!approveTxn}" />
				<apex:commandButton value="Disapprove JV Transactions"
					action="{!disapproveTxn}" />
			</apex:pageBlockButtons>

		</apex:pageblock>

	</apex:form>


</apex:page>