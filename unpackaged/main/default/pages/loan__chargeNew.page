<apex:page lightningStylesheets="true" standardController="loan__Charge__c" extensions="loan.ChargeViewController" tabStyle="loan__Loan_Account__c" 
	sidebar="{!IF($CurrentPage.Parameters.modal == 'true', false, true)}">
<apex:include pageName="clcommon__mintTheme"/>


    <script src="{!URLFOR($Resource.loan__jQueryFiles, 'js/jquery-1.8.3.min.js')}"/>
    <script src="{!URLFOR($Resource.loan__helperclose)}"/>
    <script> function setFocusOnLoad(){} </script>
    <script>
        j$ = jQuery.noConflict();
    </script>
    <apex:stylesheet value="{!IF($CurrentPage.Parameters.modal == 'true', $Resource.loan__modalheaderStyle,'')}"/>
    <!--<script type="text/javascript" src="{!URLFOR($Resource.MFICustomWidgets, 'js/MFIWidgets.js')}"></script>
    <link rel="stylesheet" href="{!URLFOR($Resource.MFICustomWidgets, 'css/MFIWidgets.css')}" type="text/css"></link>-->
    <apex:form id="chargeForm">     
        <apex:sectionHeader title="Post a Charge"/>
        <apex:pageblock mode="edit" id="topBlk">
            <apex:inlineEditSupport />
            <apex:pageBlockButtons location="both" >
                <c:BusyButton name="Save" busyName="Saving" actionTo="{!save}"
                    oncomplete="closeIframe();" 
                    id="sBtn" style="margin-left:120px;" />
                <apex:commandButton value="Cancel" action="{!cancel}" onclick="closeIframe(null, 'chargesTab')"   id="cBtn"/>
            </apex:pageBlockButtons>
            <apex:pageMessages escape="false"/>
            <apex:pageBlockSection columns="2" title="Information">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Loan</apex:outputLabel>
                    <apex:outputpanel >
                        <apex:outputfield value="{!loan__Charge__c.loan__Loan_Account__c}" >                            
                            <apex:inlineEditSupport disabled="true"/>
                        </apex:outputField>
                        <!--<a href="#" class="hlinkPopup" popup="selectFee"><img src="/img/arrowRight.gif"/></a>
                        <div id="selectFee" class="contextualActionContent" style="display:none">
                            <apex:pageBlock mode="edit">
                                <apex:pageblockSection columns="1">
                                    <apex:outputLabel value="sarat"></apex:outputLabel>
                                    <apex:outputLabel value="dadad"></apex:outputLabel>
                                </apex:pageblockSection>
                            </apex:pageBlock>
                        </div>-->
                    </apex:outputpanel>
                </apex:pageBlockSectionItem>
                <apex:inputField value="{!loan__Charge__c.loan__Date__c}"/>
                <apex:pageBlocksectionItem >
                    <apex:outputLabel >Fee</apex:outputLabel>
                    <apex:outputPanel >
                        <apex:inputField value="{!loan__Charge__c.loan__Fee__c}">
                            <apex:actionsupport action="{!feeChanged}" event="onchange" reRender="topBlk" status="feeChange"/>
                        </apex:inputField>
                        <apex:actionStatus id="feeChange">
                            <apex:facet name="start" >
                                <apex:image value="/img/loading32.gif" style="height:15px;"/>
                            </apex:facet>
                        </apex:actionStatus>
                    </apex:outputPanel>
                </apex:pageBlocksectionItem>
                <apex:inputCheckbox value="{!loan__Charge__c.loan__Paid__c}" disabled="true"/>               
                <apex:inputField value="{!loan__Charge__c.loan__Reference__c}"/>
                <apex:inputField value="{!loan__Charge__c.loan__Waive__c}"/>
                
                <!--<apex:inputField value="{!loan__Charge__c.loan__Fee__c}">
                    <apex:actionsupport action="{!feeChanged}" event="onchange" reRender="topBlk"/>
                </apex:inputField>-->
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1" title="Interest">
                <apex:inputCheckbox value="{!loan__Charge__c.loan__Interest_Bearing__c}"/>
                <apex:outputLabel ></apex:outputLabel>
                <apex:inputField value="{!loan__Charge__c.loan__Interest_Rate__c}"/>
                <apex:outputLabel ></apex:outputLabel>
                <apex:inputField value="{!loan__Charge__c.loan__Accrue_Interest_From__c}"/>
                <apex:outputLabel ></apex:outputLabel>
                <apex:outputField value="{!loan__Charge__c.loan__Calculated_Interest3__c}" rendered="{!NOT(ISBLANK(loan__Charge__c.Id))}">
                    <apex:inlineEditSupport disabled="true"/>
                </apex:outputField>
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="2" title="Amount" >
                <apex:inputField value="{!loan__Charge__c.loan__Original_Amount__c}"/>
                <apex:outputLabel ></apex:outputLabel>
                <apex:inputField value="{!loan__Charge__c.loan__Paid_Amount__c}"/>
                <apex:outputLabel ></apex:outputLabel>
                <apex:inputField value="{!loan__Charge__c.loan__Total_Amount_Due__c}"/>
            </apex:pageBlockSection>
            
            <!--c:FieldSetPanel value2="Charge__c" 
                              value3="{!Charge__c}"/-->
            
            <!--<apex:pageBlockTable value="{!Charge__c}" var="item">
                <apex:column title="Type">
                    <a href="#" class="hlinkPopup" popup="xxx"><img src="/img/arrowRight.gif"/></a>
                        <div class="contextualActionContent" id="xxx" style="display:none">
                            <apex:pageBlock mode="edit">
                                <apex:pageblockSection columns="1">
                                    <apex:outputLabel >Hello!!</apex:outputLabel>
                                    <apex:outputLabel >Hello!!</apex:outputLabel>
                                </apex:pageblockSection>
                            </apex:pageBlock>
                        </div>
                </apex:column>
                <apex:column title="Charge Type" value="{!item.Paid_Amount__c}"></apex:column>
            </apex:pageBlockTable>-->
        </apex:pageblock>
    </apex:form>
    </apex:page>