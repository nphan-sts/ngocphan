<apex:page lightningStylesheets="true" controller="loan.LoanDiagnosticsAction"
	tabStyle="Organization_Preference__tab">
<apex:include pageName="clcommon__mintTheme"/>

	<apex:sectionHeader title="Run Diagnostics" />

	<apex:form >
		<apex:pageBlock id="diagnosticsPBId">
			<apex:pageMessages />
			<apex:outputpanel id="dianosticsPanel">
				<apex:outputLabel value="Only Migrated Loans"
					for="OnlyMigratedLoans" />
				<apex:inputCheckbox label="OnlyMigratedLoans"
					value="{!onlyMigratedLoans}" disabled="true" />
				<apex:outputLabel value="All Loans" for="AllLoans" />
				<apex:inputCheckbox label="AllLoans" value="{!allLoans}"
					disabled="true" />
				<apex:panelGrid columns="4">
					<c:BusyButton name="Run Loan Diagnostics" busyname="Processing..."
						actionTo="{!runDiagnostics}" reRenderTo="diagnosticsPBId" />
					<c:BusyButton name="Refresh Result View" busyname="Refreshing..."
						actionTo="{!refresh}" reRenderTo="resultPBId" />
				</apex:panelGrid>
			</apex:outputpanel>
		</apex:pageBlock>

		<apex:pageBlock id="resultPBId" title="Result">
			<apex:pageBlockTable value="{!dataMigrationErrorRecList}"
				id="errorTable" var="err">
				<apex:column headerValue="Loan" width="100" value="{!err.loan__Loan__c}" />
				<apex:column headerValue="Level" width="200" value="{!err.loan__Level__c}" />
				<apex:column headerValue="Message" value="{!err.loan__Error_Message__c}" />
				<apex:column headerValue="Code" width="200"
					value="{!err.loan__Error_Code__c}" />
			</apex:pageBlockTable>
		</apex:pageBlock>
	</apex:form>
</apex:page>