<apex:page lightningStylesheets="true" id="AchMaintainencePage" standardController="loan__Loan_Account__c"
    extensions="loan.AchMaintainenceController" tabStyle="loan__Loan_Account__c"
    sidebar="{!IF($CurrentPage.Parameters.modal == 'true', false, true)}"
    title="Waive Interest">
<apex:include pageName="clcommon__mintTheme"/>

    <apex:stylesheet value="{!IF($CurrentPage.Parameters.modal == 'true', $Resource.loan__modalheaderStyle,'')}" />
    <apex:stylesheet value="{!$Resource.loan__HelpLink_CSS}" />
    <script type= "text/javascript" src="{!$Resource.ShowPage_JS}"/>
    <script
        src="{!URLFOR($Resource.jQueryFiles, 'js/jquery-1.8.3.min.js')}" />
    <script src="{!URLFOR($Resource.helperclose)}" />
    <script>
      j$ = jQuery.noConflict();
      
    </script>
    	
    <apex:sectionHeader title="Cancel One Time ACH /Stop Recurring ACH"
        id="cancelACHSection" />
    <div style="height:300px;">
        <apex:form id="AchCancelForm" >
            
            <apex:pageBlock mode="edit" id="cancelAchTxn">
                <apex:pageMessages />
                <apex:pageBlockButtons location="both">
                    <apex:commandButton action="{!validateAchMaintainence}"
                        value="Validate" id="validateButton" style="margin-left:120px;" />
                    <c:BusyButton name="Save" busyName="Saving" actionTo="{!save}"
                        disabled="{!(cancelOneTimeAchTxn.Id != null)}"
                        oncomplete="({!closeModal}===true) ? closeIframe('{!loanAccount.Id}') : {};"
                        reRenderTo="AchCancelForm" />
                    <apex:commandButton value="Cancel" action="{!cancel}"
                        onclick="closeIframe()" immediate="true" />
                    <apex:commandButton value="Close" immediate="true"
                        action="{!URLFOR($Action.Loan_Account__c.View,Loan_Account__c.Id)}"
                        onclick="closeIframe()" />
                </apex:pageBlockButtons>
                
                <apex:pageBlockSection title="Parameters" columns="2">
                    <apex:selectRadio value="{!cancelOneTimeAchFlag}">
                        <apex:selectOption itemValue="true" itemLabel="Cancel One Time ACH" />
                        <apex:selectOption itemValue="false" itemLabel="Stop Recurring ACH" />
                        <apex:actionSupport action="{!txnParameterChanged}"
                            event="onchange" />
                    </apex:selectRadio>
                    <apex:outputField value="{!cancelOneTimeAchTxn.loan__Txn_Date__c}" />
                </apex:pageBlockSection>
    
    			<apex:outputPanel styleClass="mint-lightning-wrapper mint-lightning-wrapper-center">
                <apex:pageBlockSection title="Transaction Detail" columns="2"
                    rendered="{!(cancelOneTimeAchTxn.Id != null)}">
                    <apex:outputField value="{!cancelOneTimeAchTxn.loan__Loan_Account__c}" />
                    <apex:outputField value="{!cancelOneTimeAchTxn.loan__Transaction_Type__c}" />
                    <apex:outputField value="{!cancelOneTimeAchTxn.loan__Txn_Date__c}" />
                </apex:pageBlockSection>
                </apex:outputPanel>
            </apex:pageBlock>
        </apex:form>
    </div>

</apex:page>